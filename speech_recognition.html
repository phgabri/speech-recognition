<!DOCTYPE html>
<html>
  <head>
    <title>Continuous Speech Recognition</title>
  </head>
  <body>
    <script>
      var recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.continuous = true;
      recognition.interimResults = false;

      recognition.onresult = function(event) {
        var transcript = event.results[event.results.length - 1][0].transcript;
        document.getElementById('result').value = transcript;
        window.AppInventor.setWebViewString(transcript);
      };

      recognition.onerror = function(event) {
        console.error(event);
        recognition.stop();
        setTimeout(function() {
          recognition.start();
        }, 1000);
      };

      recognition.onend = function() {
        recognition.start();
      };

      recognition.start();
      // Add this function to send result to App Inventor
    function sendResultToApp(result) {
      AppInventor.setWebViewString(result);
    }
    </script>
    <textarea id="result" style="width:100%; height:100px;"></textarea>
  </body>
</html>
